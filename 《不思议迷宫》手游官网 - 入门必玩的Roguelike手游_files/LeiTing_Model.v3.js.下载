/**
 * 
 * LeiTing_Model.v3.js
 * 
 * @authors leiTingGame-wuchangjiang
 * @date    2017-03-27 
 * @version v2017
 * 
 */

window['LeiTing'] = window['LeiTing'] || {};
window['LeiTing']['Model'] = {
	//设置cookie
	setCookie : function (name, value, exdays) {
	    this.d = new Date();
	    this.d.setTime(this.d.getTime() + (exdays*24*60*60*1000));
	    
	    this.expires = 'expires='+this.d.toUTCString();
	    document.cookie = name + '=' + value + '; ' + this.expires + '; path=/';
	},
	//获取cookie
	getCookie : function (name) {
		this.name = name;
	    this.ca   = document.cookie.split(';');
	    
	    for(var i=0; i<this.ca.length; i++) {
	        this.c = this.ca[i];
	        while (this.c.charAt(0)==' '){
	        	this.c = this.c.substring(1)
	        };
	        if (this.name==this.c.split('=')[0]){
	        	return this.c.split('=')[1];
	       }
	    }
	    return '';
	},
	//清除cookie  
	clearCookie : function (name) {
	    window['LeiTing']['Model'].setCookie(name, '', -1);  
	},
	//判断是否登录
	isLogin : function (){
		if(window['LeiTing']['Model'].getCookie('KY')!='' && window['LeiTing']['Model'].getCookie('UN')!=''){
		    return true;
		}else{
		    return false;
		}
	},
	//正则校验
	verify : function(str,type){
		this.re={
			'email'  : /^[_a-z0-9]+@([_a-z0-9]+\.)+[a-z0-9]{2,3}$/,
			'iphone' : /^1[3458796]\d{9}$/
		};
		return this.re[type]!=undefined?this.re[type].test(str)?true:false:'other';
	},
	//判断是否 移动端设备
	isMobile : function(){
		this.sUserAgent = navigator.userAgent.toLowerCase();
		if((this.sUserAgent.match(/(iphone|ipod|android|ios|ipad|backerry|webos|symbian|windows phone|phone|mobile|webos|incognito|webmate|bada|nokia|lg|ucweb|skyfire)/i))) {
			return 'mobile';
		}else{
			return 'pc';
		}
	},
	// 检测浏览器
	browser : function(){
		this.str = window.navigator.userAgent;
		this.re = /MSIE 6.0|MSIE 7.0|MSIE 8.0|MSIE 9.0|MSIE 10.0|Chrome/;
		this.sType = this.re.exec(this.str)[0].toString();
		switch(this.sType){
			case 'MSIE 6.0':
				return 'ie6';
			case 'MSIE 7.0':
				return 'ie7';
			case 'MSIE 8.0':
				return 'ie8';
			case 'MSIE 9.0':
				return 'ie9';
			case 'MSIE 10.0':
				return 'ie10';
			case 'Chrome':
				return 'chrome';
			case 'Firefox':
				return 'firefox';
			default :
				return 'other'
		}
	},
	//判断是ios还是安卓
	phoneSystem : function (){
		this.sUserAgent = navigator.userAgent.toLowerCase();
		if ((sUserAgent.match(/(iphone|ipod|ios|ipad)/i))) {
			return 'ios';
		}else{
			return 'android';
		}
	},
	// 获取操作系统信息
	detectOS : function () {  
	    this.sUserAgent = navigator.userAgent;  
	    this.isWin = (navigator.platform == 'Win32') || (navigator.platform == 'Windows');  
	    this.isMac = (navigator.platform == 'Mac68K') || (navigator.platform == 'MacPPC') || (navigator.platform == 'Macintosh') || (navigator.platform == 'MacIntel');  
	    if (this.isMac) return 'Mac';  
	    
	    if ((navigator.platform == 'X11') && !this.isWin && !this.isMac) return 'Unix'; 
	    
	    if ((String(navigator.platform).indexOf('Linux') > -1)) return 'Linux';  
	    if (this.isWin) {  
	        if (this.sUserAgent.indexOf('Windows NT 5.0') > -1 || this.sUserAgent.indexOf('Windows 2000') > -1) return 'Win2000';  
	        if (this.sUserAgent.indexOf('Windows NT 5.1') > -1 || this.sUserAgent.indexOf('Windows XP') > -1) return 'WinXP'; 
	        if (this.sUserAgent.indexOf('Windows NT 5.2') > -1 || this.sUserAgent.indexOf('Windows 2003') > -1) return 'Win2003'; 
	        if (this.sUserAgent.indexOf('Windows NT 6.0') > -1 || this.sUserAgent.indexOf('Windows Vista') > -1) return 'WinVista';  
	        if (this.sUserAgent.indexOf('Windows NT 6.1') > -1 || this.sUserAgent.indexOf('Windows 7') > -1) return 'Win7';  
	    }  
	    return 'other';  
	},
	//是否安装了flash  以及flash版本
	flashChecker : function (){
		this.hasFlash = 0;　　　　
		this.flashVersion = 0;　
		if(document.all) {  
			var swf = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');  
			if(swf) {  
			    this.hasFlash = 1;  
			    VSwf = swf.GetVariable('$version');  
			    this.flashVersion = parseInt(VSwf.split(' ')[1].split(',')[0]);  
			}  
		} else {  
			if(navigator.plugins && navigator.plugins.length > 0) {  
			    var swf = navigator.plugins['Shockwave Flash'];  
			    if(swf) {  
			        this.hasFlash = 1;  
			        var words = swf.description.split(' ');  
			        for(var i = 0; i < words.length; ++i) {  
			            if(isNaN(parseInt(words[i]))) continue;  
			            this.flashVersion = parseInt(words[i]);  
			        }  
			    }  
			}  
		}  
		return {  
			f: this.hasFlash,  
			v: this.flashVersion  
		};  
	},
	logs : function(msg){
		this.l=window.console || {
		        log: function() {},
		        info: function() {}
		};
		this.dF=function (t, o) {
			Object.defineProperty(window, t, {
			    get: o
			})
		}
		if(msg)this.l.log('%c雷霆组件使用提醒:%c '+msg,'color:red;','color:#000;');

	}
};
var LT_Model=window['LeiTing']['Model'];